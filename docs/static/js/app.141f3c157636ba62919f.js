webpackJsonp([5],{102:function(t,s,e){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0});var i=e(4),a=e(48),o=e.n(a),n=e(31),r=e(30),l=e(50),c=e(49);e.n(c);i.a.use(r.a),i.a.use(n.a),i.a.config.productionTip=!1;var d=t,u=new r.a({mode:"history",base:d,routes:l.a});new i.a({router:u,render:function(t){return t(o.a)}}).$mount("#app")}).call(s,"/")},103:function(t,s,e){"use strict";s.a={addFoodsList:function(t,s){t.commit("addFoodsList",s)},desFoodsList:function(t,s){t.commit("desFoodsList",s)},dropBalls:function(t,s){t.commit("dropBalls",s)},changeBallPosition:function(t,s){t.commit("changeBallPosition",s)},clearShopCar:function(t){t.commit("clearFoodsList")}}},104:function(t,s,e){"use strict";s.a={getFoodsList:function(t){return t.foodsList},getBallList:function(t){return t.ballList},getBallPosition:function(t){return t.ballPosition},getDropBallList:function(t){return t.dropBallList}}},105:function(t,s,e){"use strict";s.a={addFoodsList:function(t,s){0===s.checkNum?(s.checkNum+=1,t.foodsList.push(s)):s.checkNum++},desFoodsList:function(t,s){1===s.checkNum&&function(t,s){for(var e=0;e<t.length;e++)if(t[e]===s){t.splice(e,1);break}}(t.foodsList,s),s.checkNum--},clearFoodsList:function(t){t.foodsList.forEach(function(t){t.checkNum=0}),t.foodsList=[]},dropBalls:function(t){for(var s=t.ballList.length,e=0;e<s;e++)if(t.ballList[e].show===!1)return t.ballList[e].show=!0,void t.dropBallList.push(t.ballList[e])},changeBallPosition:function(t,s){t.ballPosition.x=s.getBoundingClientRect().left,t.ballPosition.y=s.getBoundingClientRect().top}}},106:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(57),a=e.n(i),o=e(4),n=e(54),r=e.n(n),l=e(56),c=e.n(l);o.a.prototype.$http=r.a,s.default={data:function(){return{seller:""}},created:function(){var t=this;this.$http.get("/api/seller").then(function(s){s=s.data,0===s.errno&&(t.seller=s.data)}),this.$http.get("api/v2/book/1220562").then(function(t){console.log(t)},function(t){console.log(t)}),this.$http.get("https://api.douban.com/v2/book/1220562").then(function(t){console.log(t)},function(t){console.log(t)})},components:{"v-header":a.a,"v-footer":c.a},methods:{}}},107:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(101),a=e.n(i),o=e(4),n=e(32);s.default={data:function(){return{foodsList:[]}},props:["foodsItem"],created:function(){void 0===this.foodsItem.checkNum&&"object"===a()(this.foodsItem)&&o.a.set(this.foodsItem,"checkNum",0)},methods:{addFoods:function(t){if(t._constructed){var s=t.target;n.a.dispatch("changeBallPosition",s),n.a.dispatch("addFoodsList",this.foodsItem),this.$nextTick(function(){n.a.dispatch("dropBalls")}),this.$emit("addFoods")}},decreaseFoods:function(t){t._constructed&&(n.a.dispatch("desFoodsList",this.foodsItem),this.$emit("decreaseFoods"))}}}},108:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(32),a=e(52),o=e.n(a),n=e(51),r=e.n(n);s.default={data:function(){return{minPrice:0,ballList:[],detailShow:!1}},created:function(){var t=this;this.$nextTick(function(){t.minPrice=t.seller.minPrice,t.ballList=i.a.getters.getBallList})},computed:{foodsList:function(){return i.a.getters.getFoodsList},foodsNum:function(){return i.a.getters.getFoodsList.length},totalPrice:function(){var t=0;return i.a.getters.getFoodsList.forEach(function(s,e,i){t+=s.price*s.checkNum}),t},startPrice:function(){return 0===this.totalPrice?"¥"+this.seller.minPrice+"起送":this.totalPrice<this.seller.minPrice?"还差¥"+(this.seller.minPrice-this.totalPrice)+"起送":"去结算"},hasfoods:function(){var t=!1;return this.foodsList.length>0&&(t=!0),t}},props:["seller"],methods:{beforeDrop:function(t){var s=i.a.getters.getBallPosition.x-32,e=-(window.innerHeight-i.a.getters.getBallPosition.y-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+e+"px,0)",t.style.transform="translate3d(0,"+e+"px,0)",t.getElementsByClassName("innerHook")[0].style.webkitTransform="translate3d("+s+"px,0,0)",t.getElementsByClassName("innerHook")[0].style.transform="translate3d("+s+"px,0,0)"},enterDrop:function(t,s){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)",t.getElementsByClassName("innerHook")[0].style.webkitTransform="translate3d(0,0,0)",t.getElementsByClassName("innerHook")[0].style.transform="translate3d(0,0,0)"})},afterDrop:function(t){console.log("afterDrop"),i.a.getters.getDropBallList.shift.show=!1,t.style.display="none"},clearShopCar:function(){this.detailShow=!1,i.a.dispatch("clearShopCar")},showDetail:function(){var t=this;void 0!==this.$refs.carDetail&&(this.detailShow=!this.detailShow,this.$nextTick(function(){t._initialBetterScroll()}))},_initialBetterScroll:function(){this.foodScroll?this.foodScroll.refresh():this.foodScroll=new r.a(this.$refs.carDetail,{scrollY:!0,probeType:3,click:!0})},decreaseFoods:function(){0===this.foodsList.length&&(this.detailShow=!1),this.foodScroll.refresh()}},components:{cardShop:o.a}}},109:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e(53),a=e.n(i);s.default={data:function(){return{detailShow:!1,classMap:[]}},props:["seller"],created:function(){this.classMap=["decrease-icon","discount-icon","special-icon","invoice-icon","guarantee-icon"]},methods:{showDetail:function(){this.detailShow=!this.detailShow}},components:{"star-component":a.a}}},110:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default={props:["size","score"],computed:{starType:function(){return"starType-"+this.size},classes:function(){for(var t=[],s=0;s<Math.floor(this.score);s++)t.push("on");return Math.floor(2*this.score)%2!=0&&t.push("half"),t.length<5&&t.push("off"),t}}}},32:function(t,s,e){"use strict";var i=e(4),a=e(31),o=e(104),n=e(105),r=e(103);i.a.use(a.a);var l=[{show:!1},{show:!1},{show:!1},{show:!1}],c={x:0,y:0},d={foodsList:[],ballList:l,ballPosition:c,dropBallList:[]};s.a=new a.a.Store({state:d,getters:o.a,mutations:n.a,actions:r.a})},48:function(t,s,e){e(66);var i=e(9)(e(106),e(60),null,null);t.exports=i.exports},49:function(t,s){},50:function(t,s,e){"use strict";var i=e(4),a=e(30);i.a.use(a.a);var o=function(t){return e.e(0).then(function(){return t(e(130))}.bind(null,e)).catch(e.oe)},n=function(t){return e.e(1).then(function(){return t(e(132))}.bind(null,e)).catch(e.oe)},r=function(t){return e.e(3).then(function(){return t(e(133))}.bind(null,e)).catch(e.oe)},l=function(t){return e.e(2).then(function(){return t(e(131))}.bind(null,e)).catch(e.oe)};s.a=[{path:"/",component:l},{path:"/goods",component:o},{path:"/rating",component:n},{path:"/seller",component:r}]},52:function(t,s,e){e(64);var i=e(9)(e(107),e(58),null,null);t.exports=i.exports},53:function(t,s,e){e(65);var i=e(9)(e(110),e(59),null,null);t.exports=i.exports},56:function(t,s,e){e(68);var i=e(9)(e(108),e(62),null,null);t.exports=i.exports},57:function(t,s,e){e(67);var i=e(9)(e(109),e(61),null,null);t.exports=i.exports},58:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"cardShop",staticClass:"card-wrapper"},[e("transition",{attrs:{name:"fade"}},[t.foodsItem.checkNum>0?e("span",{staticClass:"decrease",on:{click:function(s){s.stopPropagation(),t.decreaseFoods(s)}}},[e("i",{staticClass:"icon-remove_circle_outline inner"})]):t._e()]),t._v(" "),t.foodsItem.checkNum>0?e("p",[t._v(t._s(t.foodsItem.checkNum))]):t._e(),t._v(" "),e("span",{on:{click:function(s){s.stopPropagation(),t.addFoods(s)}}},[e("i",{staticClass:"icon-add_circle"})])],1)},staticRenderFns:[]}},59:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star",class:t.starType},t._l(t.classes,function(t){return e("span",{staticClass:"star-item",class:t})}))},staticRenderFns:[]}},60:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("v-header",{attrs:{seller:t.seller}}),t._v(" "),e("div",{staticClass:"tab border-1px"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/rating"}},[t._v("评价")])],1),t._v(" "),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),t._v(" "),e("router-view"),t._v(" "),e("v-footer",{ref:"footer",attrs:{seller:t.seller}})],1)},staticRenderFns:[]}},61:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("article",{staticClass:"content-wrapper"},[e("img",{attrs:{src:t.seller.avatar,alt:"商家头像",width:"64",height:"64"}}),t._v(" "),e("section",{staticClass:"seller-info"},[e("div",{staticClass:"seller-name"},[e("span",{staticClass:"brand"}),t._v(" "),e("p",[t._v(t._s(t.seller.name))])]),t._v(" "),e("p",{staticClass:"seller-desc"},[t._v(t._s(t.seller.description)+"／"+t._s(t.seller.deliveryTime)+"分钟送达")]),t._v(" "),t.seller.supports?e("div",{staticClass:"seller-support"},[e("span",{staticClass:"supports-icon",class:t.classMap[t.seller.supports[0].type]}),t._v(" "),e("p",[t._v(t._s(t.seller.supports[0].description))])]):t._e(),t._v(" "),t.seller.supports?e("aside",{staticClass:"more-supports",on:{click:function(s){t.showDetail()}}},[e("p",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()])]),t._v(" "),e("aside",{staticClass:"bulletin-wrapper",on:{click:function(s){t.showDetail()}}},[e("span",{staticClass:"bulletin-icon"}),t._v(" "),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),t._v(" "),e("i",{staticClass:"icon-keyboard_arrow_right"})]),t._v(" "),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"popop"},[e("div",{staticClass:"detail-wrapper clearFix"},[e("div",{staticClass:"detail-main"},[e("section",{staticClass:"detail-header"},[t._v("\n            "+t._s(t.seller.name)+"\n          ")]),t._v(" "),e("star-component",{attrs:{size:48,score:t.seller.score}}),t._v(" "),e("section",{staticClass:"little-header"},[e("div",{staticClass:"header-line"}),t._v(" "),e("div",{staticClass:"header-text"},[t._v("优惠信息")]),t._v(" "),e("div",{staticClass:"header-line"})]),t._v(" "),e("section",{staticClass:"detail-supports"},t._l(t.seller.supports,function(s){return e("div",{staticClass:"supports-item"},[e("span",{staticClass:"icon",class:t.classMap[s.type]}),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])})),t._v(" "),e("section",{staticClass:"little-header"},[e("div",{staticClass:"header-line"}),t._v(" "),e("div",{staticClass:"header-text"},[t._v("商家公告")]),t._v(" "),e("div",{staticClass:"header-line"})]),t._v(" "),e("section",{staticClass:"seller-bulletin"},[t._v("\n            "+t._s(t.seller.bulletin)+"\n          ")])],1)]),t._v(" "),e("div",{staticClass:"detail-close",on:{click:function(s){t.showDetail()}}},[e("i",{staticClass:"icon-close"})])])])],1)},staticRenderFns:[]}},62:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"footer"},[e("div",{staticClass:"footer-left",on:{click:function(s){t.showDetail()}}},[e("section",{staticClass:"shop-car"},[e("div",{staticClass:"icon-bg",class:{"car-select":t.foodsNum>0,"car-not-select":0===t.foodsNum}},[e("i",{staticClass:"icon-shopping_cart"})]),t._v(" "),t.foodsNum>0?e("span",{staticClass:"foods-num"},[t._v(t._s(t.foodsNum))]):t._e(),t._v(" "),e("div",{staticClass:"balls-wrapper"},t._l(t.ballList,function(s){return e("section",{staticClass:"balls"},[e("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.enterDrop,"after-enter":t.afterDrop}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("span",{staticClass:"inner innerHook"})])])],1)}))]),t._v(" "),e("section",{staticClass:"total-price",class:{"reach-price":t.totalPrice>0}},[t._v("\n      ¥"+t._s(t.totalPrice)+"\n    ")]),t._v(" "),e("section",{staticClass:"deliver-price"},[t._v("\n      另需配送费¥"+t._s(t.seller.deliveryPrice)+"元\n    ")])]),t._v(" "),e("div",{staticClass:"min-price",class:{"no-select":t.totalPrice<t.seller.minPrice,select:t.totalPrice>=t.seller.minPrice}},[e("p",[t._v(t._s(t.startPrice))])]),t._v(" "),e("transition",{attrs:{name:"slide"}},[t.hasfoods?e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"car-detail"},[e("aside",{staticClass:"car-box"},[e("header",{staticClass:"car-header"},[e("p",{staticClass:"header-text"},[t._v("购物车")]),t._v(" "),e("span",{staticClass:"clear-car",on:{click:t.clearShopCar}},[t._v("清空")])]),t._v(" "),e("div",{ref:"carDetail",staticClass:"car-content "},[e("div",{staticClass:"scroll-box"},t._l(t.foodsList,function(s){return e("section",{staticClass:"car-item"},[e("p",{staticClass:"foods-name"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"foods-more"},[e("p",{staticClass:"foods-price"},[e("span",{staticClass:"¥"},[t._v("¥")]),t._v(t._s(s.price))]),t._v(" "),e("card-shop",{attrs:{foodsItem:s},on:{decreaseFoods:t.decreaseFoods}})],1)])}))])])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"maskFade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"mask",on:{click:function(s){t.detailShow=!1}}})])],1)},staticRenderFns:[]}},64:function(t,s){},65:function(t,s){},66:function(t,s){},67:function(t,s){},68:function(t,s){}},[102]);
//# sourceMappingURL=app.141f3c157636ba62919f.js.map